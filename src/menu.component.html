<div class="absolute top-0 left-0 h-full w-4/5 max-w-xs bg-gray-800 z-50 p-5 flex flex-col shadow-2xl animate-slide-in-left">
  <!-- Header -->
  @if(user(); as u) {
    <div (click)="onNavigate('profile')" class="flex items-center mb-8 cursor-pointer">
      <img [src]="u.avatarUrl" alt="User Avatar" class="w-16 h-16 rounded-full mr-4 border-2 border-gray-600">
      <div>
        <h2 class="text-xl font-bold text-white">{{ u.name }}</h2>
        <p class="text-sm text-gray-400">Xem hồ sơ</p>
      </div>
    </div>
  } @else {
    <!-- Guest Header -->
    <div class="flex flex-col items-center justify-center mb-8 pt-4 pb-4 border-b border-gray-700">
        <i class="ph-bold ph-user-circle text-6xl text-gray-500 mb-3"></i>
        <h2 class="text-xl font-bold text-white mb-2">Khách</h2>
        <p class="text-sm text-gray-400 text-center">Đăng nhập để có trải nghiệm tốt nhất.</p>
    </div>
  }

  <!-- Navigation -->
  <nav class="flex-grow">
    <ul class="space-y-2">
      @if(user()) {
        <li>
          <button (click)="onNavigate('rideHistory')" class="flex items-center w-full p-3 rounded-lg text-lg text-gray-200 hover:bg-gray-700 transition-colors">
            <i class="ph-bold ph-clock-counter-clockwise text-2xl mr-4 text-gray-400"></i>
            <span>Lịch sử chuyến đi</span>
          </button>
        </li>
        <li>
          <button (click)="onNavigate('rewards')" class="flex items-center w-full p-3 rounded-lg text-lg text-gray-200 hover:bg-gray-700 transition-colors">
            <i class="ph-bold ph-gift text-2xl mr-4 text-gray-400"></i>
            <span>Ưu đãi</span>
          </button>
        </li>
      }
       <li>
        <button (click)="onNavigate('driverInfo')" class="flex items-center w-full p-3 rounded-lg text-lg text-gray-200 hover:bg-gray-700 transition-colors">
          <i class="ph-bold ph-steering-wheel text-2xl mr-4 text-gray-400"></i>
          <span>Trở thành tài xế</span>
        </button>
      </li>
      @if(user()) {
        <li>
          <button (click)="onNavigate('settings')" class="flex items-center w-full p-3 rounded-lg text-lg text-gray-200 hover:bg-gray-700 transition-colors">
            <i class="ph-bold ph-gear text-2xl mr-4 text-gray-400"></i>
            <span>Cài đặt</span>
          </button>
        </li>
      }
    </ul>
  </nav>
  
  <!-- Footer/Logout/Login -->
  <div>
     @if(user()) {
       <button (click)="logout.emit()" class="flex items-center w-full p-3 rounded-lg text-lg text-red-400 hover:bg-red-900/50 transition-colors">
        <i class="ph-bold ph-sign-out text-2xl mr-4"></i>
        <span>Đăng xuất</span>
      </button>
     } @else {
       <button (click)="logout.emit()" class="flex items-center justify-center w-full p-3 rounded-lg text-lg bg-brand-primary text-white hover:bg-green-700 transition-colors">
        <i class="ph-bold ph-sign-in text-2xl mr-3"></i>
        <span>Đăng nhập / Đăng ký</span>
      </button>
     }
  </div>
</div>